<!doctype html>
<html lang="es" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pretty Nails - Calculadora de Precios</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    * { font-family: 'Montserrat', sans-serif; }
    h1, h2, h3, .glam-title { font-family: 'Playfair Display', serif; }
    
    .glass-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(139, 90, 43, 0.1);
    }
    
    .selected-option {
      background: linear-gradient(135deg, #8B5A2B 0%, #6B4423 100%) !important;
      color: white !important;
      transform: scale(1.02);
      box-shadow: 0 8px 25px rgba(139, 90, 43, 0.3);
    }
    
    .option-btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .option-btn:hover:not(.selected-option) {
      background: rgba(139, 90, 43, 0.1);
      transform: translateY(-2px);
    }
    
    .deco-selected {
      background: linear-gradient(135deg, #8B5A2B 0%, #6B4423 100%) !important;
      color: white !important;
    }
    
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #D4AF37;
      border-radius: 50%;
      animation: sparkle 2s infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #8B5A2B 0%, #D4AF37 50%, #8B5A2B 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .total-display {
      background: linear-gradient(135deg, #8B5A2B 0%, #6B4423 100%);
      box-shadow: 0 10px 40px rgba(139, 90, 43, 0.4);
    }
    
    .section-divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(139, 90, 43, 0.3), transparent);
    }
    
    .counter-btn {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .counter-btn:hover {
      transform: scale(1.1);
    }
    
    .nav-tab {
      transition: all 0.3s ease;
    }
    
    .nav-tab.active {
      background: linear-gradient(135deg, #8B5A2B 0%, #6B4423 100%);
      color: white;
    }
    
    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] { -moz-appearance: textfield; }
    
    .scrollbar-thin::-webkit-scrollbar { width: 4px; }
    .scrollbar-thin::-webkit-scrollbar-track { background: rgba(139, 90, 43, 0.1); border-radius: 10px; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(139, 90, 43, 0.3); border-radius: 10px; }
  </style>
 </head>
 <body class="h-full overflow-auto" style="background: linear-gradient(145deg, #F5F0EB 0%, #E8DDD4 50%, #F5F0EB 100%);">
  <div id="app" class="min-h-full pb-44">
   <!-- Header -->
   <header class="relative py-6 px-4 text-center">
    <div class="sparkle" style="top: 20%; left: 15%;"></div>
    <div class="sparkle" style="top: 30%; right: 20%; animation-delay: 0.5s;"></div>
    <div class="sparkle" style="top: 60%; left: 25%; animation-delay: 1s;"></div>
    <div class="inline-block mb-2">
     <span class="text-3xl">üíÖ</span>
    </div>
    <h1 id="salon-name" class="text-3xl md:text-4xl font-bold gradient-text mb-1">üíóPretty Nailsüíó</h1>
    <p id="tagline" class="text-sm text-amber-800/70 tracking-widest uppercase">Calculadora de Precios</p>
   </header>

   <!-- Navigation Tabs -->
   <nav class="sticky top-0 z-40 px-4 py-3 bg-gradient-to-b from-[#F5F0EB] to-transparent">
    <div class="flex gap-2 max-w-lg mx-auto overflow-x-auto scrollbar-thin pb-1">
     <button onclick="showSection('manicure')" class="nav-tab active flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium text-amber-900 bg-white/50 shadow-sm" data-section="manicure">üíÖ Manicure</button>
     <button onclick="showSection('pedicure')" class="nav-tab flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium text-amber-900 bg-white/50 shadow-sm" data-section="pedicure">ü¶∂ Pedicure</button>
     <button onclick="showSection('extras')" class="nav-tab flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium text-amber-900 bg-white/50 shadow-sm" data-section="extras">‚ú® Extras</button>
    </div>
   </nav>

   <!-- Main Content -->
   <main class="px-4 max-w-2xl mx-auto space-y-4">

    <!-- Nombre del cliente -->
    <section class="glass-card rounded-2xl p-5">
      <h2 class="glam-title text-xl font-semibold text-amber-900 mb-3 flex items-center gap-2">
        <span class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-sm">üë§</span>
        Cliente
      </h2>
      <input
        type="text"
        id="cliente-nombre"
        placeholder="Nombre del cliente"
        class="w-full px-4 py-3 rounded-xl bg-white/60 border border-amber-200/60 text-amber-900 placeholder-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-400 text-sm"
      />
    </section>

    <!-- MANICURE SECTION -->
    <div id="section-manicure" class="space-y-4 fade-in">
     <!-- T√©cnica Selection -->
     <section class="glass-card rounded-2xl p-5">
      <h2 class="glam-title text-xl font-semibold text-amber-900 mb-4 flex items-center gap-2"><span class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-sm">1</span> T√©cnica</h2>
      <div class="space-y-3">
       <!-- Acr√≠licas -->
       <div class="border border-amber-200/50 rounded-xl p-4 bg-white/30">
        <button onclick="toggleTecnica('acrilicas')" class="w-full flex items-center justify-between text-left">
          <span class="font-medium text-amber-900">Acr√≠licas</span>
          <span id="acrilicas-arrow" class="text-amber-700 transition-transform">‚ñº</span>
        </button>
        <div id="acrilicas-options" class="hidden mt-3 space-y-2">
         <p class="text-xs text-amber-700 mb-2">Selecciona el largo:</p>
         <div class="grid grid-cols-4 gap-2">
          <button onclick="selectAcrilico(1, 200)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#1<br><span class="text-xs font-semibold">$200</span></button>
          <button onclick="selectAcrilico(2, 220)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#2<br><span class="text-xs font-semibold">$220</span></button>
          <button onclick="selectAcrilico(3, 240)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#3<br><span class="text-xs font-semibold">$240</span></button>
          <button onclick="selectAcrilico(4, 260)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#4<br><span class="text-xs font-semibold">$260</span></button>
          <button onclick="selectAcrilico(5, 280)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#5<br><span class="text-xs font-semibold">$280</span></button>
          <button onclick="selectAcrilico(6, 300)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#6<br><span class="text-xs font-semibold">$300</span></button>
          <button onclick="selectAcrilico(7, 320)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#7<br><span class="text-xs font-semibold">$320</span></button>
          <button onclick="selectAcrilico(8, 340)" class="option-btn acrilico-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">#8<br><span class="text-xs font-semibold">$340</span></button>
         </div>
        </div>
       </div>

       <!-- Forma -->
       <div id="forma-section" class="hidden border border-amber-200/50 rounded-xl p-4 bg-white/30">
        <p class="font-medium text-amber-900 mb-3">Forma</p>
        <div class="grid grid-cols-2 gap-2">
         <button onclick="selectForma('cuadrada', 20)" class="option-btn forma-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">Cuadrada <span class="font-semibold">+$20</span></button>
         <button onclick="selectForma('ovalada', 30)" class="option-btn forma-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">Ovalada <span class="font-semibold">+$30</span></button>
         <button onclick="selectForma('coffin', 30)" class="option-btn forma-btn px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50">Coffin <span class="font-semibold">+$30</span></button>
        </div>
        <label class="flex items-center gap-2 mt-3 cursor-pointer">
          <input type="checkbox" id="acrilico-color" onchange="toggleAcrilicoColor()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
          <span class="text-sm text-amber-800">+ Acr√≠lico de color (+$20)</span>
        </label>
       </div>

       <!-- Ba√±o de Acr√≠lico -->
       <button onclick="selectTecnicaSimple('bano', 200)" class="option-btn tecnica-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Ba√±o de acr√≠lico <span class="text-xs opacity-70">(del #1)</span></span>
        <span class="font-semibold text-amber-700">$200</span>
       </button>

       <!-- Rubber -->
       <div class="border border-amber-200/50 rounded-xl p-4 bg-white/30">
        <button onclick="toggleTecnica('rubber')" class="w-full flex items-center justify-between text-left">
          <span class="font-medium text-amber-900">Rubber</span>
          <span id="rubber-arrow" class="text-amber-700 transition-transform">‚ñº</span>
        </button>
        <div id="rubber-options" class="hidden mt-3 space-y-2">
         <button onclick="selectTecnicaSimple('rubber-corta', 180)" class="option-btn tecnica-btn w-full px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50 text-left flex justify-between">
           <span>U√±a natural corta</span><span class="font-semibold">$180</span>
         </button>
         <button onclick="selectTecnicaSimple('rubber-larga', 200)" class="option-btn tecnica-btn w-full px-3 py-2 rounded-lg bg-white/50 text-sm text-amber-900 border border-amber-200/50 text-left flex justify-between">
           <span>U√±a natural m√°s larga</span><span class="font-semibold">$200</span>
         </button>
        </div>
       </div>

       <!-- Acr√≠lico con Nivelaci√≥n Rubber -->
       <button onclick="selectTecnicaSimple('nivelacion', 230)" class="option-btn tecnica-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Acr√≠lico con nivelaci√≥n Rubber</span>
        <span class="font-semibold text-amber-700">$230</span>
       </button>

       <!-- Retoque Rubber -->
       <button onclick="selectTecnicaSimple('retoque-rubber', 200)" class="option-btn tecnica-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Retoque de Rubber</span>
        <span class="font-semibold text-amber-700">$200</span>
       </button>

       <!-- Gel Semipermanente -->
       <button onclick="selectTecnicaSimple('gel', 150)" class="option-btn tecnica-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Gel Semipermanente <span class="text-xs opacity-70">(1-2 tonos)</span></span>
        <span class="font-semibold text-amber-700">$150</span>
       </button>

       <!-- Gel Pies -->
       <button onclick="selectTecnicaSimple('gel-pies-manos', 100)" class="option-btn tecnica-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Gel Semipermanente Pies</span>
        <span class="font-semibold text-amber-700">$100</span>
       </button>
      </div>
     </section>

     <!-- Decoraciones -->
     <section class="glass-card rounded-2xl p-5">
      <h2 class="glam-title text-xl font-semibold text-amber-900 mb-2 flex items-center gap-2"><span class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-sm">2</span> Decoraciones</h2>
      <p class="text-xs text-amber-700 mb-4">Selecciona cu√°ntas u√±as con cada decoraci√≥n</p>
      <div class="grid grid-cols-1 gap-2 max-h-80 overflow-y-auto scrollbar-thin pr-2">
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Espejo</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('espejo', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-espejo" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('espejo', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Ojo de gato</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('ojodegato', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-ojodegato" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('ojodegato', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Su√©ter</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('sueter', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-sueter" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('sueter', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Aura</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('aura', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-aura" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('aura', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Glitter</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('glitter', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-glitter" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('glitter', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Blooming</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('blooming', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-blooming" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('blooming', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">M√°rmol</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('marmol', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-marmol" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('marmol', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Carey</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('carey', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-carey" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('carey', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Relieve</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('relieve', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-relieve" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('relieve', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">French</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('french', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-french" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('french', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">BabyBoomer</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('babyboomer', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-babyboomer" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('babyboomer', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Charms</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('charms', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-charms" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('charms', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Cristales peque√±os</span><span class="text-xs text-amber-700 w-12 text-right">$1/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('cristales-peq', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-cristales-peq" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('cristales-peq', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Cristales de figuras</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('cristales-fig', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-cristales-fig" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('cristales-fig', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Foil / Hoja de oro</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('foil', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-foil" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('foil', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Stickers</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('stickers', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-stickers" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('stickers', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Mano alzada simple</span><span class="text-xs text-amber-700 w-12 text-right">$20/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('mano-simple', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-mano-simple" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('mano-simple', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Mano alzada complicado</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('mano-comp', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-mano-comp" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('mano-comp', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">3D</span><span class="text-xs text-amber-700 w-12 text-right">$15/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('3d', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-3d" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('3d', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Perlas</span><span class="text-xs text-amber-700 w-12 text-right">$5/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('perlas', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-perlas" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('perlas', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Flores 3D</span><span class="text-xs text-amber-700 w-12 text-right">$10/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('flores3d', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-flores3d" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('flores3d', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">Encapsulado</span><span class="text-xs text-amber-700 w-12 text-right">$15/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('encapsulado', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-encapsulado" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('encapsulado', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <div class="deco-item flex items-center justify-between px-3 py-2 rounded-lg bg-white/40 border border-amber-100">
        <span class="text-sm text-amber-900 flex-1">U√±a completa de cristales</span><span class="text-xs text-amber-700 w-12 text-right">$50/u√±a</span>
        <div class="flex items-center gap-2 ml-3">
         <button onclick="updateDeco('cristales-full', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="deco-cristales-full" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateDeco('cristales-full', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
      </div>
     </section>
    </div>

    <!-- PEDICURE SECTION -->
    <div id="section-pedicure" class="hidden space-y-4 fade-in">
     <section class="glass-card rounded-2xl p-5">
      <h2 class="glam-title text-xl font-semibold text-amber-900 mb-4 flex items-center gap-2"><span class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-sm">ü¶∂</span> Pedicure</h2>
      <div class="space-y-2">
       <button onclick="selectPedicure('sencillo', 260)" class="option-btn pedicure-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Sencillo <span class="text-xs opacity-70">(1-2 tonos)</span></span>
        <span class="font-semibold text-amber-700">$260</span>
       </button>
       <button onclick="selectPedicure('bomba', 300)" class="option-btn pedicure-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Bomba efervescente</span>
        <span class="font-semibold text-amber-700">$300</span>
       </button>
       <button onclick="selectPedicure('jelly', 320)" class="option-btn pedicure-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">JellySpa</span>
        <span class="font-semibold text-amber-700">$320</span>
       </button>
       <button onclick="selectPedicure('gel-pies', 100)" class="option-btn pedicure-btn w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/30 border border-amber-200/50 text-left">
        <span class="text-amber-900">Gel Semipermanente Pies</span>
        <span class="font-semibold text-amber-700">$100</span>
       </button>
      </div>
      <div class="mt-4 pt-4 border-t border-amber-200/30 space-y-2">
       <p class="text-sm font-medium text-amber-800 mb-2">Extras de pedicure:</p>
       <label class="flex items-center justify-between px-3 py-2 rounded-lg bg-white/30 cursor-pointer">
        <span class="text-sm text-amber-900">+ Acr√≠lico en 2 u√±as</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">+$50</span>
         <input type="checkbox" id="pedi-acrilico-2" onchange="updatePedicureExtras()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
       <label class="flex items-center justify-between px-3 py-2 rounded-lg bg-white/30 cursor-pointer">
        <span class="text-sm text-amber-900">+ Acr√≠lico en todas las u√±as</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">+$130</span>
         <input type="checkbox" id="pedi-acrilico-all" onchange="updatePedicureExtras()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
       <label class="flex items-center justify-between px-3 py-2 rounded-lg bg-white/30 cursor-pointer">
        <span class="text-sm text-amber-900">+ Decoraci√≥n extra</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">+$20</span>
         <input type="checkbox" id="pedi-deco" onchange="updatePedicureExtras()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
      </div>
     </section>
    </div>

    <!-- EXTRAS SECTION -->
    <div id="section-extras" class="hidden space-y-4 fade-in">
     <section class="glass-card rounded-2xl p-5">
      <h2 class="glam-title text-xl font-semibold text-amber-900 mb-4 flex items-center gap-2"><span class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-sm">‚ú®</span> Servicios Extras</h2>
      <div class="space-y-3">
       <div class="flex items-center justify-between px-3 py-3 rounded-lg bg-white/30 border border-amber-200/50">
        <div>
         <span class="text-sm text-amber-900">Reposici√≥n de u√±as</span>
         <span class="text-xs text-amber-600 block">$20 por u√±a</span>
        </div>
        <div class="flex items-center gap-2">
         <button onclick="updateExtra('reposicion', -1)" class="counter-btn bg-amber-100 text-amber-800 hover:bg-amber-200">‚àí</button>
         <span id="extra-reposicion" class="w-6 text-center text-sm font-medium text-amber-900">0</span>
         <button onclick="updateExtra('reposicion', 1)" class="counter-btn bg-amber-700 text-white hover:bg-amber-600">+</button>
        </div>
       </div>
       <label class="flex items-center justify-between px-3 py-3 rounded-lg bg-white/30 border border-amber-200/50 cursor-pointer">
        <span class="text-sm text-amber-900">Cambio de forma</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">$50</span>
         <input type="checkbox" id="extra-cambio-forma" onchange="updateExtrasCheckbox()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
       <label class="flex items-center justify-between px-3 py-3 rounded-lg bg-white/30 border border-amber-200/50 cursor-pointer">
        <span class="text-sm text-amber-900">Retiro de acr√≠lico</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">$100</span>
         <input type="checkbox" id="extra-retiro-acrilico" onchange="updateExtrasCheckbox()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
       <label class="flex items-center justify-between px-3 py-3 rounded-lg bg-white/30 border border-amber-200/50 cursor-pointer">
        <span class="text-sm text-amber-900">Retiro de Rubber</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">$70</span>
         <input type="checkbox" id="extra-retiro-rubber" onchange="updateExtrasCheckbox()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
       <label class="flex items-center justify-between px-3 py-3 rounded-lg bg-white/30 border border-amber-200/50 cursor-pointer">
        <span class="text-sm text-amber-900">Retoque</span>
        <div class="flex items-center gap-2">
         <span class="text-sm font-semibold text-amber-700">$200</span>
         <input type="checkbox" id="extra-retoque" onchange="updateExtrasCheckbox()" class="w-4 h-4 rounded border-amber-300 text-amber-700 focus:ring-amber-500">
        </div>
       </label>
      </div>
     </section>
    </div>
   </main>

   <!-- Fixed Total Bar -->
   <div class="fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-[#F5F0EB] via-[#F5F0EB] to-transparent pt-8">
    <div class="max-w-2xl mx-auto">
     <div class="total-display rounded-2xl p-4 text-white">
      <div class="flex items-center justify-between">
       <div>
        <p class="text-xs uppercase tracking-wider opacity-80">Total estimado</p>
        <p id="total-display" class="text-3xl font-bold">$0</p>
       </div>
       <div class="flex flex-col gap-2 items-end">
        <button onclick="generarTicketPDF()" class="px-4 py-2 bg-white text-amber-800 hover:bg-amber-50 rounded-xl text-sm font-semibold transition-all shadow">
          üßæ Generar Ticket
        </button>
        <button onclick="resetAll()" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl text-sm font-medium transition-all">
          Nueva Cotizaci√≥n
        </button>
       </div>
      </div>
      <div id="summary" class="mt-3 pt-3 border-t border-white/20 text-xs space-y-1 max-h-24 overflow-y-auto scrollbar-thin"></div>
     </div>
    </div>
   </div>
  </div>

  <script>
    // Pricing state
    let state = {
      tecnica: null,
      tecnicaPrecio: 0,
      forma: null,
      formaPrecio: 0,
      acrilicoColor: false,
      decoraciones: {},
      pedicure: null,
      pedicurePrecio: 0,
      pedicureExtras: 0,
      extras: { reposicion: 0 },
      extrasCheckbox: {
        cambioForma: false,
        retiroAcrilico: false,
        retiroRubber: false,
        retoque: false
      }
    };

    // Decoration prices
    const decoPrices = {
      'espejo': 5, 'ojodegato': 5, 'sueter': 5, 'aura': 5, 'glitter': 5,
      'blooming': 10, 'marmol': 5, 'carey': 10, 'relieve': 10, 'french': 5,
      'babyboomer': 5, 'charms': 10, 'cristales-peq': 1, 'cristales-fig': 5,
      'foil': 5, 'stickers': 5, 'mano-simple': 20, 'mano-comp': 10, '3d': 15,
      'perlas': 5, 'flores3d': 10, 'encapsulado': 15, 'cristales-full': 50
    };

    const decoNames = {
      'espejo': 'Espejo', 'ojodegato': 'Ojo de gato', 'sueter': 'Su√©ter', 'aura': 'Aura',
      'glitter': 'Glitter', 'blooming': 'Blooming', 'marmol': 'M√°rmol', 'carey': 'Carey',
      'relieve': 'Relieve', 'french': 'French', 'babyboomer': 'BabyBoomer', 'charms': 'Charms',
      'cristales-peq': 'Cristales peque√±os', 'cristales-fig': 'Cristales de figuras',
      'foil': 'Foil / Hoja de oro', 'stickers': 'Stickers', 'mano-simple': 'Mano alzada simple',
      'mano-comp': 'Mano alzada complicado', '3d': '3D', 'perlas': 'Perlas',
      'flores3d': 'Flores 3D', 'encapsulado': 'Encapsulado', 'cristales-full': 'U√±a completa de cristales'
    };

    // Navigation
    function showSection(section) {
      document.querySelectorAll('[id^="section-"]').forEach(s => s.classList.add('hidden'));
      document.getElementById(`section-${section}`).classList.remove('hidden');
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      document.querySelector(`[data-section="${section}"]`).classList.add('active');
    }

    // T√©cnica functions
    function toggleTecnica(type) {
      const options = document.getElementById(`${type}-options`);
      const arrow = document.getElementById(`${type}-arrow`);
      options.classList.toggle('hidden');
      arrow.style.transform = options.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
    }

    function selectAcrilico(num, precio) {
      clearTecnicaSelection();
      state.tecnica = `Acr√≠licas #${num}`;
      state.tecnicaPrecio = precio;
      document.querySelectorAll('.acrilico-btn').forEach(b => b.classList.remove('selected-option'));
      event.target.closest('button').classList.add('selected-option');
      document.getElementById('forma-section').classList.remove('hidden');
      calculateTotal();
    }

    function selectForma(forma, precio) {
      state.forma = forma.charAt(0).toUpperCase() + forma.slice(1);
      state.formaPrecio = precio;
      document.querySelectorAll('.forma-btn').forEach(b => b.classList.remove('selected-option'));
      event.target.closest('button').classList.add('selected-option');
      calculateTotal();
    }

    function toggleAcrilicoColor() {
      state.acrilicoColor = document.getElementById('acrilico-color').checked;
      calculateTotal();
    }

    function selectTecnicaSimple(tipo, precio) {
      clearTecnicaSelection();
      const nombres = {
        'bano': 'Ba√±o de acr√≠lico',
        'rubber-corta': 'Rubber u√±a corta',
        'rubber-larga': 'Rubber u√±a larga',
        'nivelacion': 'Acr√≠lico con nivelaci√≥n Rubber',
        'retoque-rubber': 'Retoque de Rubber',
        'gel': 'Gel Semipermanente',
        'gel-pies-manos': 'Gel Semipermanente Pies'
      };
      state.tecnica = nombres[tipo];
      state.tecnicaPrecio = precio;
      document.querySelectorAll('.tecnica-btn').forEach(b => b.classList.remove('selected-option'));
      event.target.closest('button').classList.add('selected-option');
      document.getElementById('forma-section').classList.add('hidden');
      calculateTotal();
    }

    function clearTecnicaSelection() {
      state.forma = null;
      state.formaPrecio = 0;
      state.acrilicoColor = false;
      document.getElementById('acrilico-color').checked = false;
      document.querySelectorAll('.acrilico-btn, .tecnica-btn, .forma-btn').forEach(b => b.classList.remove('selected-option'));
    }

    // Decoraciones ‚Äî sin l√≠mite superior
    function updateDeco(deco, delta) {
      if (!state.decoraciones[deco]) state.decoraciones[deco] = 0;
      state.decoraciones[deco] = Math.max(0, state.decoraciones[deco] + delta);
      document.getElementById(`deco-${deco}`).textContent = state.decoraciones[deco];
      calculateTotal();
    }

    // Pedicure
    function selectPedicure(tipo, precio) {
      const nombres = {
        'sencillo': 'Pedicure Sencillo',
        'bomba': 'Pedicure Bomba',
        'jelly': 'Pedicure JellySpa',
        'gel-pies': 'Gel Semipermanente Pies'
      };
      state.pedicure = nombres[tipo];
      state.pedicurePrecio = precio;
      document.querySelectorAll('.pedicure-btn').forEach(b => b.classList.remove('selected-option'));
      event.target.closest('button').classList.add('selected-option');
      calculateTotal();
    }

    function updatePedicureExtras() {
      const acrilico2 = document.getElementById('pedi-acrilico-2').checked;
      const acrilicoAll = document.getElementById('pedi-acrilico-all').checked;
      const deco = document.getElementById('pedi-deco').checked;
      if (acrilico2 && acrilicoAll) {
        document.getElementById('pedi-acrilico-2').checked = false;
      }
      state.pedicureExtras = 0;
      if (document.getElementById('pedi-acrilico-2').checked) state.pedicureExtras += 50;
      if (acrilicoAll) state.pedicureExtras += 130;
      if (deco) state.pedicureExtras += 20;
      calculateTotal();
    }

    // Extras
    function updateExtra(extra, delta) {
      state.extras[extra] = Math.max(0, state.extras[extra] + delta);
      document.getElementById(`extra-${extra}`).textContent = state.extras[extra];
      calculateTotal();
    }

    function updateExtrasCheckbox() {
      state.extrasCheckbox.cambioForma = document.getElementById('extra-cambio-forma').checked;
      state.extrasCheckbox.retiroAcrilico = document.getElementById('extra-retiro-acrilico').checked;
      state.extrasCheckbox.retiroRubber = document.getElementById('extra-retiro-rubber').checked;
      state.extrasCheckbox.retoque = document.getElementById('extra-retoque').checked;
      calculateTotal();
    }

    // Build summary lines
    function buildSummaryLines() {
      let total = 0;
      let summary = [];

      if (state.tecnicaPrecio > 0) {
        total += state.tecnicaPrecio;
        summary.push({ label: state.tecnica, precio: state.tecnicaPrecio });
      }
      if (state.formaPrecio > 0) {
        total += state.formaPrecio;
        summary.push({ label: `Forma ${state.forma}`, precio: state.formaPrecio });
      }
      if (state.acrilicoColor) {
        total += 20;
        summary.push({ label: 'Acr√≠lico de color', precio: 20 });
      }
      let decoTotal = 0;
      for (const [deco, qty] of Object.entries(state.decoraciones)) {
        if (qty > 0) {
          const cost = qty * decoPrices[deco];
          decoTotal += cost;
          summary.push({ label: `${decoNames[deco]} x${qty}`, precio: cost });
        }
      }
      total += decoTotal;
      if (state.pedicurePrecio > 0) {
        total += state.pedicurePrecio;
        summary.push({ label: state.pedicure, precio: state.pedicurePrecio });
      }
      if (state.pedicureExtras > 0) {
        total += state.pedicureExtras;
        summary.push({ label: 'Extras pedicure', precio: state.pedicureExtras });
      }
      if (state.extras.reposicion > 0) {
        const cost = state.extras.reposicion * 20;
        total += cost;
        summary.push({ label: `Reposici√≥n (${state.extras.reposicion} u√±as)`, precio: cost });
      }
      if (state.extrasCheckbox.cambioForma) { total += 50; summary.push({ label: 'Cambio de forma', precio: 50 }); }
      if (state.extrasCheckbox.retiroAcrilico) { total += 100; summary.push({ label: 'Retiro acr√≠lico', precio: 100 }); }
      if (state.extrasCheckbox.retiroRubber) { total += 70; summary.push({ label: 'Retiro Rubber', precio: 70 }); }
      if (state.extrasCheckbox.retoque) { total += 200; summary.push({ label: 'Retoque', precio: 200 }); }

      return { total, summary };
    }

    // Calculate total
    function calculateTotal() {
      const { total, summary } = buildSummaryLines();
      document.getElementById('total-display').textContent = `$${total}`;
      document.getElementById('summary').innerHTML = summary.length > 0
        ? summary.map(s => `<p class="opacity-90">‚Ä¢ ${s.label}: $${s.precio}</p>`).join('')
        : '<p class="opacity-70">Selecciona tus servicios</p>';
    }

    // Generar Ticket PDF
    function generarTicketPDF() {
      const { jsPDF } = window.jspdf;
      const { total, summary } = buildSummaryLines();
      const clienteNombre = document.getElementById('cliente-nombre').value.trim() || 'Sin nombre';

      const doc = new jsPDF({ unit: 'mm', format: [80, 200], orientation: 'portrait' });

      const pageW = 80;
      const margin = 6;
      const lineH = 6;
      let y = 10;

      // Header
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(14);
      doc.text('Pretty Nails', pageW / 2, y, { align: 'center' });
      y += 7;

      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8);
      doc.text('Calculadora de Precios', pageW / 2, y, { align: 'center' });
      y += 5;

      // Fecha
      const now = new Date();
      const fecha = now.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });
      const hora = now.toLocaleTimeString('es-MX', { hour: '2-digit', minute: '2-digit' });
      doc.text(`Fecha: ${fecha}  Hora: ${hora}`, pageW / 2, y, { align: 'center' });
      y += 5;

      // L√≠nea separadora
      doc.setLineWidth(0.3);
      doc.line(margin, y, pageW - margin, y);
      y += 5;

      // Cliente
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(9);
      doc.text(`Cliente: ${clienteNombre}`, margin, y);
      y += 6;

      // L√≠nea
      doc.setLineWidth(0.2);
      doc.line(margin, y, pageW - margin, y);
      y += 4;

      // Items
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8);

      if (summary.length === 0) {
        doc.text('Sin servicios seleccionados', margin, y);
        y += lineH;
      } else {
        for (const item of summary) {
          const labelLines = doc.splitTextToSize(item.label, 45);
          const precioStr = `$${item.precio}`;
          doc.text(labelLines, margin, y);
          doc.text(precioStr, pageW - margin, y, { align: 'right' });
          y += lineH * labelLines.length;
        }
      }

      // L√≠nea total
      y += 2;
      doc.setLineWidth(0.4);
      doc.line(margin, y, pageW - margin, y);
      y += 5;

      // Total
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(11);
      doc.text('TOTAL:', margin, y);
      doc.text(`$${total}`, pageW - margin, y, { align: 'right' });
      y += 8;

      // Footer
      doc.setFont('helvetica', 'italic');
      doc.setFontSize(7);
      doc.text('Gracias por tu visita <3', pageW / 2, y, { align: 'center' });

      // Ajustar altura del documento
      doc.internal.pageSize.height = y + 10;

      const nombreArchivo = `ticket-${clienteNombre.replace(/\s+/g, '-')}-${fecha.replace(/\//g, '-')}.pdf`;
      doc.save(nombreArchivo);
    }

    // Reset
    function resetAll() {
      state = {
        tecnica: null,
        tecnicaPrecio: 0,
        forma: null,
        formaPrecio: 0,
        acrilicoColor: false,
        decoraciones: {},
        pedicure: null,
        pedicurePrecio: 0,
        pedicureExtras: 0,
        extras: { reposicion: 0 },
        extrasCheckbox: {
          cambioForma: false,
          retiroAcrilico: false,
          retiroRubber: false,
          retoque: false
        }
      };
      document.querySelectorAll('.selected-option').forEach(el => el.classList.remove('selected-option'));
      document.querySelectorAll('[id^="deco-"]').forEach(el => el.textContent = '0');
      document.querySelectorAll('input[type="checkbox"]').forEach(el => el.checked = false);
      document.getElementById('extra-reposicion').textContent = '0';
      document.getElementById('cliente-nombre').value = '';
      document.getElementById('forma-section').classList.add('hidden');
      document.getElementById('acrilicas-options').classList.add('hidden');
      document.getElementById('rubber-options').classList.add('hidden');
      calculateTotal();
      showSection('manicure');
    }

    // Initialize
    calculateTotal();
  </script>
 </body>
</html>
